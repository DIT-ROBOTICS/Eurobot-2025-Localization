<launch>

    <arg name="robot_name" default="robot" />
    <arg name="rival_name" default="rival" />

    <node name="global_link_to_map" pkg="tf2_ros" exec="static_transform_publisher"
        args="0 0 0 0 0 0 map $(var robot_name)/map" />

    <node name="map_link_to_laser" pkg="tf2_ros" exec="static_transform_publisher"
        args="1.45 0.5 0 0 0 0 $(var robot_name)/map $(var robot_name)/laser" />


    <group>
        <push-ros-namespace namespace="$(var robot_name)" />
        <include file ="$(find-pkg-share rival_localization)/launch/firmware/view_rplidar_s3_launch.py"/>

        <node name="obstacle_detector_to_map" pkg="obstacle_detector" exec="obstacle_extractor_node">
            <param from="$(find-pkg-share rival_localization)/config/rival_localization.yaml"/>
            <remap from="raw_obstacles" to="/obstacles_to_map" />
            <param name="frame_id" value="robot/map" />
        </node>
    </group>
        
    <node pkg="rival_localization" exec="rival_localization" name="rival_localization" output="screen">
        <param from="$(find-pkg-share rival_localization)/config/rival_localization.yaml"/>
        <remap from="raw_pose" to="/$(var rival_name)/raw_pose" />
    </node>

</launch>